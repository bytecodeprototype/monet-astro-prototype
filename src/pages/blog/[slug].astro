---
import { getCollection } from "astro:content";

export async function getStaticPaths() {
    const blogPosts = await getCollection("blog");
    return blogPosts.map((post) => ({
        params: { slug: post.slug },
        props: { post },
    }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<!doctype html>
<html lang="es-CO">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>{post.data.title} - Monet Label Blog</title>
        <meta name="description" content={post.data.description} />
        <link rel="icon" type="image/svg+xml" href="/images/logo-white.svg" />

        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
                font-family:
                    -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                    Helvetica, Arial, sans-serif;
            }

            :root {
                --bg: #f3f0ea;
                --surface: #f7f2ea;
                --text: #050505;
                --text-light: #666666;
                --border: #e0e0e0;
                --primary: #111111;
                --nav-height: 76px;
            }

            body {
                background: var(--bg);
                color: var(--text);
                line-height: 1.6;
            }

            nav {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 20px 40px;
                background: rgba(255, 255, 255, 0.98);
                backdrop-filter: blur(12px);
                border-bottom: 1px solid var(--border);
                position: sticky;
                top: 0;
                min-height: var(--nav-height);
                z-index: 100;
            }

            .logo {
                font-size: 1.2rem;
                font-weight: 900;
                text-transform: uppercase;
                text-decoration: none;
                color: var(--text);
                display: flex;
                align-items: center;
                gap: 10px;
                letter-spacing: -0.5px;
            }

            .logo img {
                width: 26px;
                height: 26px;
            }

            .back-link {
                text-decoration: none;
                color: var(--text-light);
                font-size: 0.9rem;
                font-weight: 600;
                text-transform: uppercase;
                letter-spacing: 1px;
                transition: color 0.3s;
            }

            .back-link:hover {
                color: var(--text);
            }

            article {
                max-width: 800px;
                margin: 0 auto;
                padding: 80px 40px;
            }

            .post-header {
                margin-bottom: 60px;
            }

            .post-meta {
                font-size: 0.9rem;
                color: var(--text-light);
                margin-bottom: 24px;
                text-transform: uppercase;
                letter-spacing: 1px;
                font-weight: 600;
            }

            h1 {
                font-size: 3rem;
                font-weight: 900;
                margin-bottom: 20px;
                line-height: 1.1;
                letter-spacing: -2px;
            }

            .description {
                font-size: 1.3rem;
                color: var(--text-light);
                line-height: 1.6;
                margin-bottom: 32px;
            }

            .tags {
                display: flex;
                gap: 8px;
                flex-wrap: wrap;
            }

            .tag {
                font-size: 0.75rem;
                padding: 6px 14px;
                background: var(--surface);
                border: 1px solid var(--border);
                text-transform: uppercase;
                letter-spacing: 0.5px;
                font-weight: 600;
            }

            .post-image {
                width: 100%;
                height: 400px;
                margin-bottom: 60px;
                overflow: hidden;
                border: 1px solid var(--border);
            }

            .post-image img {
                width: 100%;
                height: 100%;
                object-fit: cover;
            }

            .content {
                font-size: 1.1rem;
                line-height: 1.8;
                text-align: justify;
            }

            .content h2 {
                font-size: 2rem;
                font-weight: 800;
                margin: 60px 0 24px;
                letter-spacing: -1px;
            }

            .content h3 {
                font-size: 1.5rem;
                font-weight: 700;
                margin: 40px 0 16px;
                letter-spacing: -0.5px;
            }

            .content p {
                margin-bottom: 24px;
            }

            .content ul,
            .content ol {
                margin: 24px 0;
                padding-left: 32px;
            }

            .content li {
                margin-bottom: 12px;
            }

            .content a {
                color: var(--primary);
                text-decoration: underline;
            }

            .content blockquote {
                border-left: 4px solid var(--primary);
                padding-left: 24px;
                margin: 32px 0;
                font-style: italic;
                color: var(--text-light);
            }

            .content img {
                max-width: 100%;
                height: auto;
                margin: 32px 0;
                border: 1px solid var(--border);
            }

            @media (max-width: 900px) {
                article {
                    padding: 40px 24px;
                }

                h1 {
                    font-size: 2rem;
                }

                .description {
                    font-size: 1.1rem;
                }

                .post-image {
                    height: 240px;
                }

                .content {
                    font-size: 1rem;
                }

                .content h2 {
                    font-size: 1.5rem;
                }

                .content h3 {
                    font-size: 1.2rem;
                }
            }
        </style>
    </head>
    <body>
        <nav>
            <a href="/" class="logo">
                <img src="/images/logo.svg" alt="Monet Label" />
                Monet Label
            </a>
            <div style="display: flex; gap: 24px; align-items: center;">
                <a href="/blog" class="back-link">← Blog</a>
                <a href="/" class="back-link">← Inicio</a>
            </div>
        </nav>

        <article>
            <div class="post-header">
                <div class="post-meta">
                    {
                        post.data.pubDate.toLocaleDateString("es-CO", {
                            year: "numeric",
                            month: "long",
                            day: "numeric",
                        })
                    } • {post.data.author}
                </div>
                <h1>{post.data.title}</h1>
                <p class="description">{post.data.description}</p>
                {
                    post.data.tags.length > 0 && (
                        <div class="tags">
                            {post.data.tags.map((tag) => (
                                <span class="tag">{tag}</span>
                            ))}
                        </div>
                    )
                }
            </div>

            {
                post.data.image && (
                    <div class="post-image">
                        <img src={post.data.image} alt={post.data.title} />
                    </div>
                )
            }

            <div class="content">
                <Content />
            </div>
        </article>
    </body>
</html>
